# SmartestiRoid ãƒ­ã‚°å‡ºåŠ›ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°è¨ˆç”»

> **æœ€çµ‚æ›´æ–°**: 2025-01-XX  
> **ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 2.0  
> **ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: å®Ÿè£…å¾…ã¡

## ğŸ“š ç›®æ¬¡

### Part 1: ç¾çŠ¶ã¨èª²é¡Œ
1. [ğŸš¨ ä¸è¶³ã—ã¦ã„ã‚‹æƒ…å ±ï¼ˆè¿½åŠ å¿…é ˆï¼‰](#-ä¸è¶³ã—ã¦ã„ã‚‹æƒ…å ±è¿½åŠ å¿…é ˆ)
2. [ğŸ“Š ç¾çŠ¶åˆ†æ](#-ç¾çŠ¶åˆ†æ)
3. [ğŸ¯ ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ç›®æ¨™](#-ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ç›®æ¨™)

### Part 2: è¨­è¨ˆä»•æ§˜
4. [ğŸš¨ GUIé€šçŸ¥ç”¨printï¼ˆå¤‰æ›´ç¦æ­¢ï¼‰](#-guié€šçŸ¥ç”¨printå¤‰æ›´ç¦æ­¢)
5. [ğŸ“ æ–°ãƒ­ã‚°ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆä»•æ§˜](#-æ–°ãƒ­ã‚°ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆä»•æ§˜)
6. [ğŸ“ ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ](#-ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ)

### Part 3: å®Ÿè£…è©³ç´°
7. [ğŸ”§ å…·ä½“çš„ãªä¿®æ­£æ¡ˆ](#-å…·ä½“çš„ãªä¿®æ­£æ¡ˆ)
8. [ğŸ“‹ å‡ºåŠ›ä¾‹ï¼ˆãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°å¾Œï¼‰](#-å‡ºåŠ›ä¾‹ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°å¾Œ)
9. [ğŸ“ è¿½åŠ ã™ã¹ããƒ­ã‚°ã‚¤ãƒ™ãƒ³ãƒˆ](#-è¿½åŠ ã™ã¹ããƒ­ã‚°ã‚¤ãƒ™ãƒ³ãƒˆ)

### Part 4: å®Ÿè¡Œè¨ˆç”»
10. [ğŸš€ å®Ÿè£…è¨ˆç”»](#-å®Ÿè£…è¨ˆç”»)
11. [ğŸ§ª ãƒ†ã‚¹ãƒˆè¨ˆç”»](#-ãƒ†ã‚¹ãƒˆè¨ˆç”»)
12. [ğŸ“Š æˆåŠŸåŸºæº–](#-æˆåŠŸåŸºæº–)

### Part 5: è£œè¶³æƒ…å ±
13. [ğŸ“Š æœŸå¾…ã•ã‚Œã‚‹åŠ¹æœ](#-æœŸå¾…ã•ã‚Œã‚‹åŠ¹æœ)
14. [ğŸ“ é–¢é€£ãƒ•ã‚¡ã‚¤ãƒ«](#-é–¢é€£ãƒ•ã‚¡ã‚¤ãƒ«)
15. [âš ï¸ ç§»è¡Œæ™‚ã®æ³¨æ„äº‹é …](#ï¸-ç§»è¡Œæ™‚ã®æ³¨æ„äº‹é …)
16. [ğŸ”„ ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯è¨ˆç”»](#-ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯è¨ˆç”»)
17. [âœ… å®Ÿæ–½TODOï¼ˆãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆï¼‰](#-å®Ÿæ–½todoãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ)

---

## ğŸš¨ ä¸è¶³ã—ã¦ã„ã‚‹æƒ…å ±ï¼ˆè¿½åŠ å¿…é ˆï¼‰

ç¾çŠ¶ã®ãƒ­ã‚°ã§ã¯ä»¥ä¸‹ã®é‡è¦ãªæƒ…å ±ãŒè¨˜éŒ²ã•ã‚Œã¦ãŠã‚‰ãšã€ä¸å…·åˆè§£æãŒå›°é›£ã§ã™ã€‚

### 1. LLMã¸ã®å…¥å‡ºåŠ›ï¼ˆæœ€é‡è¦ï¼‰

| é …ç›® | ç¾çŠ¶ | å¿…è¦ãªæƒ…å ± |
|------|------|-----------|
| **System Prompt** | âŒ è¨˜éŒ²ãªã— | å„ã‚¹ãƒ†ãƒ¼ã‚¸ã§ä½¿ç”¨ã™ã‚‹ã‚·ã‚¹ãƒ†ãƒ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆå…¨æ–‡ |
| **User Prompt** | âŒ è¨˜éŒ²ãªã— | LLMã«æ¸¡ã™ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆå…¨æ–‡ |
| **ç”»é¢ãƒ­ã‚±ãƒ¼ã‚¿ãƒ¼** | âš ï¸ Allureã®ã¿ | JSONãƒ­ã‚°ã«ã‚‚XML/åœ§ç¸®XMLã‚’è¨˜éŒ² |
| **ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ** | âš ï¸ Allureã®ã¿ | JSONãƒ­ã‚°ã«ç”»åƒãƒ‘ã‚¹ã¾ãŸã¯base64 |
| **LLMå¿œç­”ï¼ˆç”Ÿï¼‰** | âŒ è¨˜éŒ²ãªã— | structured_outputå‰ã®ç”Ÿãƒ¬ã‚¹ãƒãƒ³ã‚¹ |
| **LLMå¿œç­”ï¼ˆæ§‹é€ åŒ–ï¼‰** | âš ï¸ ä¸€éƒ¨ã®ã¿ | Plan, StateAnalysisç­‰ã®Pydanticãƒ¢ãƒ‡ãƒ«å…¨ä½“ |

### 2. Multi-Stage Replanã®å„ã‚¹ãƒ†ãƒ¼ã‚¸

| ã‚¹ãƒ†ãƒ¼ã‚¸ | ç¾çŠ¶ | å¿…è¦ãªæƒ…å ± |
|---------|------|-----------|
| **analyze_state** | âš ï¸ çµæœã®ã¿ | å…¥åŠ›ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã€StateAnalysiså…¨ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ |
| **decide_action** | âš ï¸ çµæœã®ã¿ | åˆ¤å®šãƒ­ã‚¸ãƒƒã‚¯ã€æ±ºå®šç†ç”±ã€Actã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ |
| **build_plan** | âš ï¸ ã‚¹ãƒ†ãƒƒãƒ—æ•°ã®ã¿ | å…¥åŠ›ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã€ç”Ÿæˆã•ã‚ŒãŸPlanå…¨ä½“ |

### 3. ãƒ„ãƒ¼ãƒ«å‘¼ã³å‡ºã—

| é …ç›® | ç¾çŠ¶ | å¿…è¦ãªæƒ…å ± |
|------|------|-----------|
| **ãƒ„ãƒ¼ãƒ«å** | âœ… è¨˜éŒ²ã‚ã‚Š | - |
| **å…¥åŠ›å¼•æ•°ï¼ˆå…¨ä½“ï¼‰** | âš ï¸ 200æ–‡å­—ã§åˆ‡ã‚Šæ¨ã¦ | å®Œå…¨ãªå…¥åŠ›å¼•æ•°ï¼ˆç‰¹ã«xpathç­‰ï¼‰ |
| **å‡ºåŠ›ï¼ˆå…¨ä½“ï¼‰** | âš ï¸ 200æ–‡å­—ã§åˆ‡ã‚Šæ¨ã¦ | å®Œå…¨ãªå‡ºåŠ›ï¼ˆã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å«ã‚€ï¼‰ |
| **å®Ÿè¡Œæ™‚é–“** | âœ… è¨˜éŒ²ã‚ã‚Š | - |
| **å‘¼ã³å‡ºã—å…ƒã‚¹ãƒ†ãƒƒãƒ—** | âš ï¸ ä¸æ˜ç¢º | ã©ã®ã‚¹ãƒ†ãƒƒãƒ—ã‹ã‚‰ã®å‘¼ã³å‡ºã—ã‹æ˜ç¤º |

### 4. é€²æ—ã¨çŠ¶æ…‹é·ç§»

| é …ç›® | ç¾çŠ¶ | å¿…è¦ãªæƒ…å ± |
|------|------|-----------|
| **ç›®æ¨™ã‚¹ãƒ†ãƒƒãƒ—ä¸€è¦§** | âš ï¸ åˆæœŸã®ã¿ | å„replanæ™‚ç‚¹ã§ã®çŠ¶æ…‹ |
| **ç›®æ¨™é”æˆåˆ¤å®šç†ç”±** | âŒ è¨˜éŒ²ãªã— | ãªãœé”æˆ/æœªé”æˆã¨åˆ¤å®šã—ãŸã‹ |
| **ã‚¹ã‚­ãƒƒãƒ—åˆ¤å®š** | âŒ è¨˜éŒ²ãªã— | è¦ç´ ã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ãŸå ´åˆã®ç†ç”± |
| **ç”»é¢é·ç§»å±¥æ­´** | âŒ è¨˜éŒ²ãªã— | ç”»é¢ã‚¿ã‚¤ãƒ—ã®å¤‰åŒ–å±¥æ­´ |

---

## ğŸ“Š ç¾çŠ¶åˆ†æ

### 1. ç¾åœ¨ã®ãƒ­ã‚°å‡ºåŠ›ã®å•é¡Œç‚¹

#### 1.1 ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã®ä¸çµ±ä¸€
```
# ç¾çŠ¶ã®å•é¡Œä¾‹
print(Fore.CYAN + "ğŸ“‹ ç›®æ¨™ã‚¹ãƒ†ãƒƒãƒ—è§£æå®Œäº†:")        # ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹ãªã—
print(Fore.MAGENTA + "[MultiStageReplanner.analyze_state model: gpt-4.1]")  # ã‚¯ãƒ©ã‚¹åå½¢å¼
print(f"[PROGRESS] {json.dumps(...)}")                # JSONå½¢å¼
print(Fore.GREEN + f"âœ… Tool End: click_element (0.14s)")  # ãƒ„ãƒ¼ãƒ«å½¢å¼
```

#### 1.2 æ§‹é€ åŒ–ã•ã‚Œã¦ã„ãªã„å‡ºåŠ›
- åŒã˜ã‚¤ãƒ™ãƒ³ãƒˆã§ã‚‚å‡ºåŠ›å½¢å¼ãŒãƒãƒ©ãƒãƒ©
- LLMãŒè§£æã—ã«ãã„è‡ªç„¶è¨€èªæ··åœ¨
- ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ãŒä¸€éƒ¨ã®ãƒ­ã‚°ã®ã¿ï¼ˆloggingçµŒç”±ã®ã¿ï¼‰

#### 1.3 è‰²ã®ä½¿ã„åˆ†ã‘ãŒä¸æ˜ç¢º
| è‰² | ç¾çŠ¶ã®ç”¨é€” | å•é¡Œç‚¹ |
|---|---|---|
| CYAN | æƒ…å ±ã€é€²æ—ã€ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ | ç”¨é€”ãŒåºƒã™ãã‚‹ |
| GREEN | æˆåŠŸã€å®Œäº† | æ¯”è¼ƒçš„ä¸€è²« |
| YELLOW | è­¦å‘Š | æ¯”è¼ƒçš„ä¸€è²« |
| RED | ã‚¨ãƒ©ãƒ¼ | æ¯”è¼ƒçš„ä¸€è²« |
| MAGENTA | LLMé–¢é€£ | ä¸æ˜ç¢º |

### 2. ãƒ­ã‚°å‡ºåŠ›ç®‡æ‰€ã®åˆ†é¡ï¼ˆ2025å¹´1æœˆæ™‚ç‚¹ï¼‰

> printæ–‡ã®ç·æ•°: **ç´„210ç®‡æ‰€**

#### 2.1 workflow.pyï¼ˆ55ç®‡æ‰€ï¼‰
```
ã‚«ãƒ†ã‚´ãƒªåˆ†é¡:
- ã‚¹ãƒ†ãƒƒãƒ—å®Ÿè¡Œ: 15ç®‡æ‰€
- ãƒªãƒ—ãƒ©ãƒ³é€²æ—: 12ç®‡æ‰€
- æ¤œè¨¼LLM: 10ç®‡æ‰€
- ç›®æ¨™é€²æ—: 10ç®‡æ‰€
- ã‚¨ãƒ©ãƒ¼/è­¦å‘Š: 8ç®‡æ‰€
```

#### 2.2 multi_stage_replanner.pyï¼ˆ50ç®‡æ‰€ï¼‰
```
ã‚«ãƒ†ã‚´ãƒªåˆ†é¡:
- analyze_state: 15ç®‡æ‰€
- decide_action: 10ç®‡æ‰€
- build_plan: 10ç®‡æ‰€
- build_response: 10ç®‡æ‰€
- ã‚¨ãƒ©ãƒ¼: 5ç®‡æ‰€
```

#### 2.3 conftest.pyï¼ˆ48ç®‡æ‰€ï¼‰
```
ã‚«ãƒ†ã‚´ãƒªåˆ†é¡:
- ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—/è¨­å®š: 15ç®‡æ‰€
- ãƒ†ã‚¹ãƒˆé€²æ—: 10ç®‡æ‰€
- ãƒˆãƒ¼ã‚¯ãƒ³ä½¿ç”¨é‡: 8ç®‡æ‰€
- ã‚¨ãƒ©ãƒ¼/è­¦å‘Š: 10ç®‡æ‰€
- ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†: 5ç®‡æ‰€
```

#### 2.4 agents/simple_planner.pyï¼ˆ46ç®‡æ‰€ï¼‰
```
ã‚«ãƒ†ã‚´ãƒªåˆ†é¡:
- ç”»é¢åˆ†æ: 10ç®‡æ‰€
- ãƒ—ãƒ©ãƒ³ç”Ÿæˆ: 12ç®‡æ‰€
- ç›®æ¨™è©•ä¾¡: 10ç®‡æ‰€
- ç”»é¢ä¸æ•´åˆãƒªãƒˆãƒ©ã‚¤: 8ç®‡æ‰€
- ã‚¨ãƒ©ãƒ¼: 6ç®‡æ‰€
```

#### 2.5 test_android_app.pyï¼ˆ8ç®‡æ‰€ï¼‰
```
ã‚«ãƒ†ã‚´ãƒªåˆ†é¡:
- ãƒ†ã‚¹ãƒˆé–‹å§‹/çµ‚äº†: 4ç®‡æ‰€
- é€²æ—é€šçŸ¥: 4ç®‡æ‰€
```

#### 2.6 ãã®ä»–ï¼ˆ3ç®‡æ‰€ï¼‰
```
- appium_tools/device_info.py: 1ç®‡æ‰€
- appium_tools/token_counter.py: 1ç®‡æ‰€
- utils/allure_logger.py: 1ç®‡æ‰€
```

---

## ğŸ¯ ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ç›®æ¨™

### 1. LLMè§£æã—ã‚„ã™ã„æ§‹é€ åŒ–ãƒ­ã‚°
```python
# ææ¡ˆå½¢å¼
[TIMESTAMP] [LEVEL] [CATEGORY] [EVENT] {structured_data}

# ä¾‹
[22:19:30] [INFO] [STEP] [EXECUTE] {"step":"click_element","target":"terms_agree","result":"success","duration_ms":140}
```

### 2. å‡ºåŠ›å…ˆã®åˆ†é›¢ï¼ˆæ¡ˆCæ¡ç”¨ï¼‰

| å‡ºåŠ›å…ˆ | å½¢å¼ | ç”¨é€” |
|-------|------|------|
| ã‚³ãƒ³ã‚½ãƒ¼ãƒ« | ã‚¢ã‚¤ã‚³ãƒ³ä»˜ããƒ†ã‚­ã‚¹ãƒˆï¼ˆè‰²ãªã—ï¼‰ | äººé–“ãŒå®Ÿè¡Œä¸­ã«ç¢ºèª |
| ãƒ•ã‚¡ã‚¤ãƒ« | JSON Lineså½¢å¼ | LLMã«ã‚ˆã‚‹å¾Œç¶šè§£æ |

```python
# ã‚³ãƒ³ã‚½ãƒ¼ãƒ«å‡ºåŠ›ä¾‹ï¼ˆäººé–“ç”¨ï¼‰
âœ… ãƒ„ãƒ¼ãƒ«å®Œäº†: click_element (0.14s)
ğŸ¯ ç›®æ¨™é”æˆ: [0] ã‚¢ãƒ—ãƒªã‚’èµ·å‹•ã™ã‚‹
ğŸ“Š é€²æ—: 2/3 (67%)

# ãƒ•ã‚¡ã‚¤ãƒ«å‡ºåŠ›ä¾‹ï¼ˆLLMè§£æç”¨ï¼‰- smartestiroid_YYYYMMDD_HHMMSS.jsonl
{"ts":"22:19:36","lvl":"INFO","cat":"TOOL","evt":"COMPLETE","data":{"tool":"click_element","ms":140}}
{"ts":"22:19:40","lvl":"INFO","cat":"OBJECTIVE","evt":"ACHIEVED","data":{"index":0,"objective":"ã‚¢ãƒ—ãƒªã‚’èµ·å‹•ã™ã‚‹"}}
```

### 3. è¨­è¨ˆæ–¹é‡

- **è‰²ã¯ä½¿ç”¨ã—ãªã„**: coloramaä¾å­˜ã‚’å‰Šé™¤ã€ã‚·ãƒ³ãƒ—ãƒ«ãªãƒ†ã‚­ã‚¹ãƒˆå‡ºåŠ›
- **ã‚¢ã‚¤ã‚³ãƒ³ã§è¦–èªæ€§ç¢ºä¿**: âœ…âŒâš ï¸ğŸ¯ğŸ“ŠğŸš€ğŸ”§ ç­‰ã§çŠ¶æ³ã‚’å³åº§ã«æŠŠæ¡
- **JSONãƒ­ã‚°ã¯è‡ªå‹•ãƒ•ã‚¡ã‚¤ãƒ«å‡ºåŠ›**: ãƒ†ã‚¹ãƒˆé–‹å§‹æ™‚ã«ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è‡ªå‹•ç”Ÿæˆ

---

## ğŸš¨ GUIé€šçŸ¥ç”¨printï¼ˆå¤‰æ›´ç¦æ­¢ï¼‰

ä»¥ä¸‹ã®printæ–‡ã¯GUIã¸ã®é€šçŸ¥ã«ä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹ãŸã‚ã€**çµ¶å¯¾ã«å¤‰æ›´ãƒ»å‰Šé™¤ã—ãªã„**ã“ã¨ã€‚

### å¤‰æ›´ç¦æ­¢ã®printæ–‡

| ãƒ•ã‚¡ã‚¤ãƒ« | ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹ | ç”¨é€” |
|---------|---------------|------|
| `test_android_app.py` | `[PROGRESS]` | ãƒ†ã‚¹ãƒˆé–‹å§‹/å®Œäº†é€šçŸ¥ |
| `conftest.py` | `[PROGRESS]` | ãƒ†ã‚¹ãƒˆåé›†å®Œäº†é€šçŸ¥ |
| `workflow.py` | `[REPLAN_PROGRESS]` | ãƒªãƒ—ãƒ©ãƒ³é€²æ—é€šçŸ¥ |

### å…·ä½“çš„ãªç®‡æ‰€

```python
# test_android_app.py
print(f"[PROGRESS] {progress_start}")   # ãƒ†ã‚¹ãƒˆé–‹å§‹
print(f"[PROGRESS] {progress_done}")    # ãƒ†ã‚¹ãƒˆå®Œäº†

# conftest.py  
print(Fore.CYAN + f"\n[PROGRESS] {{\"total\": {total}, \"status\": \"collected\"}}")

# workflow.py
print(f"[REPLAN_PROGRESS] {json.dumps({'current_replan_count': 0, ...})}")
print(f"[REPLAN_PROGRESS] {json.dumps({'current_replan_count': current_replan_count + 1, ...})}")
```

### å¯¾å¿œæ–¹é‡

1. **æ—¢å­˜ã®GUIé€šçŸ¥printã¯ãã®ã¾ã¾ç¶­æŒ**
2. æ–°ã—ã„StructuredLoggerã¯**ä¸¦è¡Œã—ã¦**å‡ºåŠ›ï¼ˆç½®ãæ›ãˆã§ã¯ãªã„ï¼‰
3. coloramaã®è‰²ï¼ˆ`Fore.CYAN`ç­‰ï¼‰ã¯å‰Šé™¤ã—ã¦ã‚‚ã€printæ–‡è‡ªä½“ã¯æ®‹ã™

```python
# Before
print(Fore.CYAN + f"\n[PROGRESS] {{\"total\": {total}, \"status\": \"collected\"}}")

# Afterï¼ˆcoloramaã®ã¿å‰Šé™¤ã€printã¯ç¶­æŒï¼‰
print(f"[PROGRESS] {{\"total\": {total}, \"status\": \"collected\"}}")

# + æ–°è¦ãƒ­ã‚°è¿½åŠ ï¼ˆä¸¦è¡Œï¼‰
SLog.log(category="TEST", event="COLLECTED", data={"total": total})
```

---

## ğŸ“ æ–°ãƒ­ã‚°ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆä»•æ§˜

### 1. ã‚«ãƒ†ã‚´ãƒªå®šç¾©

```python
class LogCategory:
    """ãƒ­ã‚°ã‚«ãƒ†ã‚´ãƒªå®šç¾©"""
    # ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
    TEST = "TEST"           # ãƒ†ã‚¹ãƒˆé–‹å§‹/çµ‚äº†
    STEP = "STEP"           # ã‚¹ãƒ†ãƒƒãƒ—å®Ÿè¡Œ
    TOOL = "TOOL"           # ãƒ„ãƒ¼ãƒ«å‘¼ã³å‡ºã—
    
    # LLMé–¢é€£
    LLM = "LLM"             # LLMæ¨è«–
    PLAN = "PLAN"           # ãƒ—ãƒ©ãƒ³ç”Ÿæˆ
    REPLAN = "REPLAN"       # ãƒªãƒ—ãƒ©ãƒ³
    ANALYZE = "ANALYZE"     # ç”»é¢åˆ†æ
    
    # é€²æ—ç®¡ç†
    PROGRESS = "PROGRESS"   # é€²æ—æ›´æ–°
    OBJECTIVE = "OBJECTIVE" # ç›®æ¨™é€²æ—
    
    # ã‚·ã‚¹ãƒ†ãƒ 
    SESSION = "SESSION"     # ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†
    CONFIG = "CONFIG"       # è¨­å®š
    ERROR = "ERROR"         # ã‚¨ãƒ©ãƒ¼
```

### 2. ã‚¤ãƒ™ãƒ³ãƒˆå®šç¾©

```python
class LogEvent:
    """ãƒ­ã‚°ã‚¤ãƒ™ãƒ³ãƒˆå®šç¾©"""
    # ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«
    START = "START"
    END = "END"
    
    # å®Ÿè¡Œ
    EXECUTE = "EXECUTE"
    COMPLETE = "COMPLETE"
    FAIL = "FAIL"
    SKIP = "SKIP"
    
    # çŠ¶æ…‹å¤‰åŒ–
    UPDATE = "UPDATE"
    CHANGE = "CHANGE"
    
    # åˆ¤å®š
    ACHIEVED = "ACHIEVED"
    NOT_ACHIEVED = "NOT_ACHIEVED"
```

### 3. æ§‹é€ åŒ–ãƒ­ã‚°å‡ºåŠ›é–¢æ•°

```python
# src/smartestiroid/utils/structured_logger.py

import json
from datetime import datetime
from pathlib import Path
from typing import Optional, Dict, Any

class StructuredLogger:
    """æ§‹é€ åŒ–ãƒ­ã‚°å‡ºåŠ›ã‚¯ãƒ©ã‚¹ï¼ˆã‚³ãƒ³ã‚½ãƒ¼ãƒ« + JSONãƒ•ã‚¡ã‚¤ãƒ«åˆ†é›¢ï¼‰"""
    
    _log_file: Optional[Path] = None
    _file_handle = None
    
    # ã‚¤ãƒ™ãƒ³ãƒˆåˆ¥ã‚¢ã‚¤ã‚³ãƒ³
    ICONS = {
        "START": "ğŸš€",
        "END": "ğŸ",
        "EXECUTE": "ğŸ”§",
        "COMPLETE": "âœ…",
        "FAIL": "âŒ",
        "SKIP": "â­ï¸",
        "ACHIEVED": "ğŸ¯",
        "NOT_ACHIEVED": "ğŸ”„",
        "UPDATE": "ğŸ“Š",
        "WARN": "âš ï¸",
    }
    
    @classmethod
    def init(cls, test_id: str, output_dir: Path = Path(".")):
        """ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ã‚’åˆæœŸåŒ–
        
        Args:
            test_id: ãƒ†ã‚¹ãƒˆIDï¼ˆãƒ•ã‚¡ã‚¤ãƒ«åã«ä½¿ç”¨ï¼‰
            output_dir: å‡ºåŠ›ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
        """
        timestamp = datetime.now().strftime("%Y%m%d_%H%M%S")
        cls._log_file = output_dir / f"smartestiroid_{test_id}_{timestamp}.jsonl"
        cls._file_handle = open(cls._log_file, "w", encoding="utf-8")
    
    @classmethod
    def close(cls):
        """ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¯ãƒ­ãƒ¼ã‚º"""
        if cls._file_handle:
            cls._file_handle.close()
            cls._file_handle = None
    
    @classmethod
    def log(
        cls,
        category: str,
        event: str,
        data: Optional[Dict[str, Any]] = None,
        message: Optional[str] = None,
        level: str = "INFO"
    ):
        """ãƒ­ã‚°ã‚’å‡ºåŠ›ï¼ˆã‚³ãƒ³ã‚½ãƒ¼ãƒ« + ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰
        
        Args:
            category: ãƒ­ã‚°ã‚«ãƒ†ã‚´ãƒª (TEST, STEP, TOOL, LLM, etc.)
            event: ã‚¤ãƒ™ãƒ³ãƒˆç¨®åˆ¥ (START, END, EXECUTE, etc.)
            data: æ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿ (dict)
            message: äººé–“å‘ã‘ã‚µãƒãƒªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
            level: ãƒ­ã‚°ãƒ¬ãƒ™ãƒ« (INFO, WARN, ERROR)
        """
        timestamp = datetime.now().strftime("%H:%M:%S")
        
        # === ãƒ•ã‚¡ã‚¤ãƒ«å‡ºåŠ›ï¼ˆJSON Linesï¼‰ ===
        if cls._file_handle:
            log_entry = {
                "ts": timestamp,
                "lvl": level,
                "cat": category,
                "evt": event,
            }
            if data:
                log_entry["data"] = data
            cls._file_handle.write(json.dumps(log_entry, ensure_ascii=False) + "\n")
            cls._file_handle.flush()
        
        # === ã‚³ãƒ³ã‚½ãƒ¼ãƒ«å‡ºåŠ›ï¼ˆäººé–“ç”¨ï¼‰ ===
        if message:
            icon = cls._get_icon(event, level)
            print(f"{icon} {message}")
    
    @classmethod
    def _get_icon(cls, event: str, level: str) -> str:
        """ã‚¤ãƒ™ãƒ³ãƒˆã¨ãƒ¬ãƒ™ãƒ«ã«å¿œã˜ãŸã‚¢ã‚¤ã‚³ãƒ³ã‚’è¿”ã™"""
        if level == "ERROR":
            return "âŒ"
        if level == "WARN":
            return "âš ï¸"
        return cls.ICONS.get(event, "ğŸ“")
```

---

## ğŸ”§ å…·ä½“çš„ãªä¿®æ­£æ¡ˆ

### 1. conftest.py ã®ä¿®æ­£ä¾‹

#### Before:
```python
print(Fore.CYAN + f"ä½¿ç”¨ãƒ¢ãƒ‡ãƒ«: {cfg.execution_model}")
print(Fore.CYAN + f"Agent Executorç”¨ãƒ¢ãƒ‡ãƒ«: {cfg.execution_model}")
print(Fore.MAGENTA + "=" * 60)
print(Fore.MAGENTA + "ã€LLMã«æ¸¡ã•ã‚Œã‚‹knowhowæƒ…å ±ã€‘")
```

#### After:
```python
from smartestiroid.utils.structured_logger import StructuredLogger as SLog

SLog.log(
    category="CONFIG",
    event="UPDATE",
    data={"execution_model": cfg.execution_model},
    message=f"ä½¿ç”¨ãƒ¢ãƒ‡ãƒ«: {cfg.execution_model}"
)
```

### 2. workflow.py ã®ä¿®æ­£ä¾‹

#### Before:
```python
print(Fore.CYAN + f"\n{'='*50}")
print(Fore.CYAN + "ğŸ“Š ç¾åœ¨ã®é€²æ—çŠ¶æ³:")
print(Fore.CYAN + progress_summary)
print(Fore.CYAN + f"{'='*50}\n")
```

#### After:
```python
SLog.log(
    category="PROGRESS",
    event="UPDATE",
    data={
        "completed_steps": completed_steps,
        "total_steps": total_steps,
        "tool_calls": len(tool_call_log),
    },
    message=f"é€²æ—: {completed_steps}/{total_steps} ã‚¹ãƒ†ãƒƒãƒ—å®Œäº†"
)
```

### 3. multi_stage_replanner.py ã®ä¿®æ­£ä¾‹

#### Before:
```python
print(Fore.MAGENTA + f"[MultiStageReplanner.analyze_state model: {self.model_name}] State analysis completed")
print(Fore.CYAN + f"  - screen_type: {state_analysis.current_screen_type}")
print(Fore.CYAN + f"  - current_objective_achieved: {state_analysis.current_objective_achieved}")
```

#### After:
```python
SLog.log(
    category="ANALYZE",
    event="COMPLETE",
    data={
        "model": self.model_name,
        # === StateAnalysiså…¨9ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ ===
        # ç”»é¢çŠ¶æ…‹
        "screen_changes": state_analysis.screen_changes,
        "screen_type": state_analysis.current_screen_type,
        "main_elements": state_analysis.main_elements,
        "blocking_dialogs": state_analysis.blocking_dialogs,
        # ç”»é¢æ•´åˆæ€§
        "screen_inconsistency": state_analysis.screen_inconsistency,
        # é€²æ—è©•ä¾¡
        "test_progress": state_analysis.test_progress,
        # ç›®æ¨™è©•ä¾¡
        "objective_achieved": state_analysis.current_objective_achieved,
        "objective_evidence": state_analysis.current_objective_evidence,
        # ææ¡ˆ
        "suggested_next_action": state_analysis.suggested_next_action,
    },
    message=f"ç”»é¢åˆ†æå®Œäº†: {state_analysis.current_screen_type}"
)
```

### 4. Toolå®Ÿè¡Œãƒ­ã‚°ã®ä¿®æ­£ä¾‹

#### Before:
```python
print(f"ğŸ”§ Tool Start: {tool_name}")
print(f"   Input: {input_preview}...")
# ... å®Ÿè¡Œ ...
print(f"âœ… Tool End: {tool_name} ({duration:.2f}s)")
print(f"   Output: {output_preview}...")
```

#### After:
```python
SLog.log(
    category="TOOL",
    event="START",
    data={"tool": tool_name, "input": input_data},
    message=f"ãƒ„ãƒ¼ãƒ«é–‹å§‹: {tool_name}"
)

# ... å®Ÿè¡Œ ...

SLog.log(
    category="TOOL",
    event="COMPLETE",
    data={
        "tool": tool_name,
        "duration_ms": int(duration * 1000),
        "success": True,
        "output_preview": output_preview[:100]
    },
    message=f"ãƒ„ãƒ¼ãƒ«å®Œäº†: {tool_name} ({duration:.2f}s)"
)
```

---

## ğŸ“‹ å‡ºåŠ›ä¾‹ï¼ˆãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°å¾Œï¼‰

### ã‚³ãƒ³ã‚½ãƒ¼ãƒ«å‡ºåŠ›ï¼ˆäººé–“ç”¨ãƒ»è‰²ãªã—ï¼‰
```
ğŸš€ ãƒ†ã‚¹ãƒˆé–‹å§‹: TEST_0015 - ãƒˆãƒƒãƒ—ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆå‹•ä½œç¢ºèª
âœ… ç”»é¢åˆ†æå®Œäº†: åˆ©ç”¨è¦ç´„ãƒ€ã‚¤ã‚¢ãƒ­ã‚°
âœ… ãƒ—ãƒ©ãƒ³ç”Ÿæˆ: 2ã‚¹ãƒ†ãƒƒãƒ—
ğŸ”§ ãƒ„ãƒ¼ãƒ«å®Ÿè¡Œ: click_element
âœ… ãƒ„ãƒ¼ãƒ«å®Œäº†: click_element (0.14s)
ğŸ¯ ç›®æ¨™é”æˆ: [0] ã‚¢ãƒ—ãƒªã‚’èµ·å‹•ã™ã‚‹
ğŸ“Š ãƒªãƒ—ãƒ©ãƒ³ #1: æ¬¡ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¨ˆç”»
ğŸ“Š ç›®æ¨™é€²æ—: 2/3 (67%)
âš ï¸ ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯: ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã—ã¦è¦ç´ ã‚’æ¢ç´¢
âŒ ãƒ„ãƒ¼ãƒ«å¤±æ•—: click_element - Element not found
ğŸ ãƒ†ã‚¹ãƒˆçµ‚äº†: PASS
```

### ãƒ•ã‚¡ã‚¤ãƒ«å‡ºåŠ›ï¼ˆLLMè§£æç”¨ãƒ»JSON Linesï¼‰
ãƒ•ã‚¡ã‚¤ãƒ«å: `smartestiroid_TEST_0015_20241204_221930.jsonl`
```json
{"ts":"22:19:30","lvl":"INFO","cat":"TEST","evt":"START","data":{"test_id":"TEST_0015","title":"ãƒˆãƒƒãƒ—ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆå‹•ä½œç¢ºèª"}}
{"ts":"22:19:31","lvl":"INFO","cat":"ANALYZE","evt":"COMPLETE","data":{"model":"gpt-4.1","screen_type":"åˆ©ç”¨è¦ç´„ãƒ€ã‚¤ã‚¢ãƒ­ã‚°"}}
{"ts":"22:19:35","lvl":"INFO","cat":"PLAN","evt":"COMPLETE","data":{"model":"gpt-4.1","steps":2}}
{"ts":"22:19:36","lvl":"INFO","cat":"TOOL","evt":"START","data":{"tool":"click_element"}}
{"ts":"22:19:36","lvl":"INFO","cat":"TOOL","evt":"COMPLETE","data":{"tool":"click_element","ms":140,"success":true}}
{"ts":"22:19:40","lvl":"INFO","cat":"OBJECTIVE","evt":"ACHIEVED","data":{"index":0,"objective":"ã‚¢ãƒ—ãƒªã‚’èµ·å‹•ã™ã‚‹"}}
{"ts":"22:19:45","lvl":"INFO","cat":"REPLAN","evt":"UPDATE","data":{"count":1,"max":20,"decision":"PLAN"}}
{"ts":"22:19:50","lvl":"INFO","cat":"PROGRESS","evt":"UPDATE","data":{"completed":2,"total":3,"pct":67}}
{"ts":"22:20:00","lvl":"WARN","cat":"STEP","evt":"SKIP","data":{"reason":"fallback_scroll"}}
{"ts":"22:20:30","lvl":"ERROR","cat":"TOOL","evt":"FAIL","data":{"tool":"click_element","error":"Element not found"}}
{"ts":"22:21:00","lvl":"INFO","cat":"TEST","evt":"END","data":{"result":"PASS","duration_s":90}}
```

---

## ğŸ“ è¿½åŠ ã™ã¹ããƒ­ã‚°ã‚¤ãƒ™ãƒ³ãƒˆ

### 1. LLMå…¥å‡ºåŠ›ãƒ­ã‚°ï¼ˆæ–°è¦è¿½åŠ ï¼‰

```json
// LLMå‘¼ã³å‡ºã—é–‹å§‹ï¼ˆãƒ—ãƒ­ãƒ³ãƒ—ãƒˆè¨˜éŒ²ï¼‰
{"ts":"22:19:31","lvl":"DEBUG","cat":"LLM","evt":"REQUEST","data":{
  "stage":"analyze_state",
  "model":"gpt-4.1",
  "system_prompt":"ã‚ãªãŸã¯ç”»é¢åˆ†æã®ã‚¨ã‚­ã‚¹ãƒ‘ãƒ¼ãƒˆã§ã™...",
  "user_prompt":"ã€å…¨ä½“ç›®æ¨™ã€‘ãƒˆãƒƒãƒ—ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆ...",
  "locator_file":"locator_22_19_31.xml",
  "screenshot_file":"screen_22_19_31.jpg"
}}

// LLMå¿œç­”ï¼ˆæ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿è¨˜éŒ²ï¼‰- StateAnalysiså…¨9ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
{"ts":"22:19:33","lvl":"DEBUG","cat":"LLM","evt":"RESPONSE","data":{
  "stage":"analyze_state",
  "model":"gpt-4.1",
  "duration_ms":2150,
  "tokens":{"prompt":1250,"completion":380,"total":1630},
  "response":{
    "screen_changes":"å‰ã‚¹ãƒ†ãƒƒãƒ—ãªã—ï¼ˆåˆæœŸçŠ¶æ…‹ï¼‰",
    "current_screen_type":"ãƒˆãƒƒãƒ—ãƒ¡ãƒ‹ãƒ¥ãƒ¼ç”»é¢",
    "main_elements":"ãƒ›ãƒ¼ãƒ ã‚¿ãƒ–(é¸æŠä¸­), æ˜ ç”»ã‚¿ãƒ–, éŸ³æ¥½ã‚¿ãƒ–, ãƒãƒƒãƒ‰ã‚­ãƒ£ã‚¹ãƒˆã‚¿ãƒ–...",
    "blocking_dialogs":null,
    "screen_inconsistency":null,
    "test_progress":"0/7ã‚¿ãƒ–ç¢ºèªæ¸ˆã¿",
    "current_objective_achieved":false,
    "current_objective_evidence":"ã¾ã ã‚¿ãƒ–ã‚’ã‚¿ãƒƒãƒ—ã—ã¦ã„ãªã„",
    "suggested_next_action":"ã™ã¹ã¦ã®ã‚¿ãƒ–ã‚’é †ç•ªã«ã‚¿ãƒƒãƒ—ã™ã‚‹"
  }
}}
```

### 2. ãƒ—ãƒ©ãƒ³ç”Ÿæˆãƒ­ã‚°ï¼ˆè©³ç´°åŒ–ï¼‰

```json
// ãƒ—ãƒ©ãƒ³ç”Ÿæˆçµæœï¼ˆå…¨ã‚¹ãƒ†ãƒƒãƒ—è¨˜éŒ²ï¼‰
{"ts":"22:19:35","lvl":"INFO","cat":"PLAN","evt":"COMPLETE","data":{
  "stage":"build_plan",
  "model":"gpt-4.1",
  "current_objective":"ã™ã¹ã¦ã®ã‚¿ãƒ–ã‚’ã‚¿ãƒƒãƒ—ã—ã¦åˆ‡ã‚Šæ›¿ãˆå‹•ä½œã‚’ç¢ºèªã™ã‚‹",
  "steps":[
    "ãƒ›ãƒ¼ãƒ ã‚¿ãƒ–ã‚’ã‚¿ãƒƒãƒ—ã™ã‚‹",
    "æ˜ ç”»ã‚¿ãƒ–ã‚’ã‚¿ãƒƒãƒ—ã™ã‚‹",
    "éŸ³æ¥½ã‚¿ãƒ–ã‚’ã‚¿ãƒƒãƒ—ã™ã‚‹",
    "ãƒãƒƒãƒ‰ã‚­ãƒ£ã‚¹ãƒˆã‚¿ãƒ–ã‚’ã‚¿ãƒƒãƒ—ã™ã‚‹",
    "ã‚ªãƒ¼ãƒ‡ã‚£ã‚ªãƒ–ãƒƒã‚¯ã‚¿ãƒ–ã‚’ã‚¿ãƒƒãƒ—ã™ã‚‹",
    "ãƒ©ã‚¤ãƒ–ã‚¿ãƒ–ã‚’ã‚¿ãƒƒãƒ—ã™ã‚‹",
    "è¨­å®šã‚¿ãƒ–ã‚’ã‚¿ãƒƒãƒ—ã™ã‚‹"
  ],
  "step_count":7,
  "expected_element_count":7,
  "reasoning":"7ã¤ã®ã‚¿ãƒ–ã™ã¹ã¦ã‚’ã‚¿ãƒƒãƒ—ã™ã‚‹å¿…è¦ãŒã‚ã‚‹"
}}
```

### 3. ãƒ„ãƒ¼ãƒ«å‘¼ã³å‡ºã—ãƒ­ã‚°ï¼ˆå®Œå…¨ç‰ˆï¼‰

```json
// ãƒ„ãƒ¼ãƒ«é–‹å§‹ï¼ˆå…¥åŠ›å…¨ä½“ï¼‰
{"ts":"22:19:36","lvl":"DEBUG","cat":"TOOL","evt":"START","data":{
  "tool":"click_element",
  "step_index":1,
  "step_text":"æ˜ ç”»ã‚¿ãƒ–ã‚’ã‚¿ãƒƒãƒ—ã™ã‚‹",
  "input":{
    "selector":"//android.widget.TextView[@text='æ˜ ç”»']",
    "strategy":"xpath"
  }
}}

// ãƒ„ãƒ¼ãƒ«å®Œäº†ï¼ˆå‡ºåŠ›å…¨ä½“ï¼‰
{"ts":"22:19:36","lvl":"DEBUG","cat":"TOOL","evt":"COMPLETE","data":{
  "tool":"click_element",
  "step_index":1,
  "duration_ms":140,
  "success":true,
  "output":"Element clicked successfully at (540, 180)"
}}

// ãƒ„ãƒ¼ãƒ«å¤±æ•—ï¼ˆã‚¨ãƒ©ãƒ¼è©³ç´°ï¼‰
{"ts":"22:20:30","lvl":"ERROR","cat":"TOOL","evt":"FAIL","data":{
  "tool":"click_element",
  "step_index":5,
  "step_text":"è¨­å®šã‚¿ãƒ–ã‚’ã‚¿ãƒƒãƒ—ã™ã‚‹",
  "duration_ms":5020,
  "error":"NoSuchElementException",
  "error_detail":"Element not found: //android.widget.TextView[@text='è¨­å®š']",
  "input":{
    "selector":"//android.widget.TextView[@text='è¨­å®š']",
    "strategy":"xpath"
  }
}}
```

### 4. ç›®æ¨™é”æˆåˆ¤å®šãƒ­ã‚°ï¼ˆæ–°è¦è¿½åŠ ï¼‰

```json
// ç›®æ¨™é”æˆåˆ¤å®š
{"ts":"22:19:40","lvl":"INFO","cat":"OBJECTIVE","evt":"EVALUATE","data":{
  "index":1,
  "description":"ã™ã¹ã¦ã®ã‚¿ãƒ–ã‚’ã‚¿ãƒƒãƒ—ã—ã¦åˆ‡ã‚Šæ›¿ãˆå‹•ä½œã‚’ç¢ºèªã™ã‚‹",
  "achieved":true,
  "reason":"7å€‹ã®ã‚¿ãƒ–ã™ã¹ã¦ãŒã‚¿ãƒƒãƒ—ã•ã‚Œã€å„ã‚¿ãƒ–ã®ç”»é¢ã«é·ç§»ã—ãŸ",
  "evidence":{
    "expected_taps":7,
    "actual_taps":7,
    "tapped_elements":["ãƒ›ãƒ¼ãƒ ","æ˜ ç”»","éŸ³æ¥½","ãƒãƒƒãƒ‰ã‚­ãƒ£ã‚¹ãƒˆ","ã‚ªãƒ¼ãƒ‡ã‚£ã‚ªãƒ–ãƒƒã‚¯","ãƒ©ã‚¤ãƒ–","è¨­å®š"]
  }
}}

// ã‚¹ã‚­ãƒƒãƒ—åˆ¤å®šï¼ˆå•é¡Œæ¤œå‡ºç”¨ï¼‰
{"ts":"22:19:38","lvl":"WARN","cat":"OBJECTIVE","evt":"SKIP","data":{
  "index":1,
  "skipped_element":"ãƒ›ãƒ¼ãƒ ã‚¿ãƒ–",
  "reason":"åˆæœŸçŠ¶æ…‹ã§é¸æŠæ¸ˆã¿ã®ãŸã‚ã‚¹ã‚­ãƒƒãƒ—",
  "is_bug":true,
  "expected_behavior":"é¸æŠæ¸ˆã¿ã§ã‚‚ã‚¿ãƒƒãƒ—ã‚’å®Ÿè¡Œã™ã¹ã"
}}
```

### 5. ç”»é¢é·ç§»ãƒ­ã‚°ï¼ˆæ–°è¦è¿½åŠ ï¼‰

```json
// ç”»é¢é·ç§»è¨˜éŒ²
{"ts":"22:19:37","lvl":"DEBUG","cat":"SCREEN","evt":"CHANGE","data":{
  "from":"ãƒ›ãƒ¼ãƒ ã‚¿ãƒ–ç”»é¢",
  "to":"æ˜ ç”»ã‚¿ãƒ–ç”»é¢",
  "trigger":"click_element",
  "element":"æ˜ ç”»ã‚¿ãƒ–"
}}
```

### 6. ç”»é¢æ•´åˆæ€§ãƒã‚§ãƒƒã‚¯ãƒ­ã‚°ï¼ˆæ–°è¦è¿½åŠ ï¼‰

ç”»é¢ä¸æ•´åˆï¼ˆpage_sourceã¨ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆç”»åƒã®ä¸ä¸€è‡´ï¼‰ã®æ¤œå‡ºã¨ãƒªãƒˆãƒ©ã‚¤ã‚’ãƒ­ã‚°è¨˜éŒ²ã€‚

```json
// ç”»é¢ä¸æ•´åˆæ¤œå‡ºï¼ˆåˆå›ï¼‰
{"ts":"22:20:15","lvl":"WARN","cat":"SCREEN","evt":"INCONSISTENCY_DETECTED","data":{
  "retry_count": 1,
  "max_retries": 2,
  "inconsistency": "ç”»åƒã¯é»’ã„ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ç”»é¢ã ãŒpage_sourceã«ã¯è¦ç´ ãŒã‚ã‚‹",
  "screen_type": "ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ç”»é¢",
  "wait_seconds": 3
}}

// ãƒªãƒˆãƒ©ã‚¤æˆåŠŸï¼ˆæ•´åˆæ€§å›å¾©ï¼‰
{"ts":"22:20:18","lvl":"INFO","cat":"SCREEN","evt":"INCONSISTENCY_RESOLVED","data":{
  "retry_count": 1,
  "resolution": "3ç§’å¾…æ©Ÿå¾Œã€ç”»åƒã¨page_sourceãŒä¸€è‡´",
  "screen_type": "ãƒ¡ã‚¤ãƒ³ç”»é¢"
}}

// ãƒªãƒˆãƒ©ã‚¤å¤±æ•—ï¼ˆpytest.failå‘¼ã³å‡ºã—å‰ï¼‰
{"ts":"22:20:24","lvl":"ERROR","cat":"SCREEN","evt":"INCONSISTENCY_PERSISTENT","data":{
  "retry_count": 2,
  "max_retries": 2,
  "inconsistency": "ç”»åƒã¯é»’ã„ã¾ã¾ã§page_sourceã«ã¯è¦ç´ ãŒã‚ã‚‹",
  "action": "pytest.fail",
  "reason": "ç”»é¢ä¸æ•´åˆãŒè§£æ¶ˆã•ã‚Œãªã„ãŸã‚ãƒ†ã‚¹ãƒˆå¤±æ•—"
}}
```

### 7. æ¤œè¨¼LLMãƒ­ã‚°ï¼ˆæ–°è¦è¿½åŠ ï¼‰

ã‚¹ãƒ†ãƒƒãƒ—å®Ÿè¡Œå¾Œã®æ¤œè¨¼LLMï¼ˆã‚¢ã‚¯ã‚·ãƒ§ãƒ³çµæœã®ç¢ºèªï¼‰ã‚’ãƒ­ã‚°è¨˜éŒ²ã€‚

```json
// æ¤œè¨¼LLMå‘¼ã³å‡ºã—
{"ts":"22:19:37","lvl":"DEBUG","cat":"LLM","evt":"VERIFY_REQUEST","data":{
  "step_text": "åˆ©ç”¨è¦ç´„ã«åŒæ„ã™ã‚‹ãƒœã‚¿ãƒ³ã‚’ã‚¿ãƒƒãƒ—",
  "model": "gpt-4.1-mini",
  "locator_file": "locator_22_19_37.xml",
  "screenshot_file": "screen_22_19_37.jpg"
}}

// æ¤œè¨¼LLMå¿œç­”ï¼ˆæˆåŠŸï¼‰
{"ts":"22:19:38","lvl":"INFO","cat":"LLM","evt":"VERIFY_RESPONSE","data":{
  "step_text": "åˆ©ç”¨è¦ç´„ã«åŒæ„ã™ã‚‹ãƒœã‚¿ãƒ³ã‚’ã‚¿ãƒƒãƒ—",
  "result": "success",
  "evidence": "æ¬¡ã®ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã«é·ç§»ã—ãŸ",
  "duration_ms": 850
}}

// æ¤œè¨¼LLMå¿œç­”ï¼ˆå¤±æ•—ï¼‰
{"ts":"22:19:38","lvl":"WARN","cat":"LLM","evt":"VERIFY_RESPONSE","data":{
  "step_text": "åˆ©ç”¨è¦ç´„ã«åŒæ„ã™ã‚‹ãƒœã‚¿ãƒ³ã‚’ã‚¿ãƒƒãƒ—",
  "result": "failure",
  "evidence": "ç”»é¢ã«å¤‰åŒ–ãŒãªã„ã€ãƒœã‚¿ãƒ³ãŒã¾ã å­˜åœ¨ã™ã‚‹",
  "contradiction": "ã‚¢ã‚¯ã‚·ãƒ§ãƒ³æˆåŠŸã®å ±å‘Šã¨ç”»é¢çŠ¶æ…‹ãŒçŸ›ç›¾",
  "duration_ms": 920
}}
```

---

## ğŸš€ å®Ÿè£…è¨ˆç”»

### Phase 1: StructuredLogger ã‚¯ãƒ©ã‚¹ä½œæˆï¼ˆ1æ—¥ç›®ï¼‰

**ãƒ•ã‚¡ã‚¤ãƒ«**: `src/smartestiroid/utils/structured_logger.py`

```
å®Ÿè£…å†…å®¹:
1. StructuredLoggerã‚¯ãƒ©ã‚¹ã®éª¨æ ¼
   - init(): ãƒ­ã‚°ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªåˆæœŸåŒ–
   - close(): ãƒ•ã‚¡ã‚¤ãƒ«ãƒãƒ³ãƒ‰ãƒ«ã‚¯ãƒ­ãƒ¼ã‚º
   - log(): ãƒ¡ã‚¤ãƒ³ãƒ­ã‚°å‡ºåŠ›
   
2. ãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜ãƒ¡ã‚½ãƒƒãƒ‰
   - save_locator(): XMLã‚’åˆ¥ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¿å­˜
   - save_screenshot(): ç”»åƒã‚’åˆ¥ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¿å­˜
   - save_prompt(): ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’åˆ¥ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¿å­˜
   - save_response(): LLMå¿œç­”ã‚’åˆ¥ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¿å­˜
   
3. è£œåŠ©æ©Ÿèƒ½
   - ãƒ­ã‚°ãƒ¬ãƒ™ãƒ«ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
   - ã‚³ãƒ³ã‚½ãƒ¼ãƒ«å‡ºåŠ›ï¼ˆã‚¢ã‚¤ã‚³ãƒ³ä»˜ãï¼‰
   - ãƒãƒƒãƒ•ã‚¡ãƒªãƒ³ã‚°ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰

ãƒ†ã‚¹ãƒˆ: tests/test_structured_logger.py
```

### Phase 2: LLMå…¥å‡ºåŠ›ã®è¨˜éŒ²è¿½åŠ ï¼ˆ2æ—¥ç›®ï¼‰

**å„ªå…ˆåº¦: æœ€é«˜**ï¼ˆä¸å…·åˆè§£æã«æœ€ã‚‚é‡è¦ï¼‰

**ãƒ•ã‚¡ã‚¤ãƒ«**: `src/smartestiroid/agents/multi_stage_replanner.py`

```
å¤‰æ›´ç®‡æ‰€:
1. analyze_state()
   - å…¥åŠ›: ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã€ãƒ­ã‚±ãƒ¼ã‚¿ãƒ¼ã€ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã‚’ä¿å­˜
   - å‡ºåŠ›: StateAnalysiså…¨ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’ä¿å­˜

2. decide_action()
   - å…¥åŠ›: çŠ¶æ…‹åˆ†æçµæœ
   - å‡ºåŠ›: Actæ±ºå®šç†ç”±

3. build_plan()
   - å…¥åŠ›: ãƒ—ãƒ©ãƒ³ãƒ‹ãƒ³ã‚°ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ
   - å‡ºåŠ›: Planå…¨ã‚¹ãƒ†ãƒƒãƒ—
```

**ãƒ•ã‚¡ã‚¤ãƒ«**: `src/smartestiroid/agents/simple_planner.py`

```
å¤‰æ›´ç®‡æ‰€:
1. parse_objective_steps()
2. create_execution_plan_for_objective()
3. analyze_screen()
4. evaluate_objective_completion()
```

### Phase 3: ãƒ„ãƒ¼ãƒ«å‘¼ã³å‡ºã—ã®å®Œå…¨è¨˜éŒ²ï¼ˆ3æ—¥ç›®ï¼‰

**ãƒ•ã‚¡ã‚¤ãƒ«**: `src/smartestiroid/utils/allure_logger.py`

```
å¤‰æ›´ç®‡æ‰€:
1. on_tool_start()
   - å…¥åŠ›å¼•æ•°ã®åˆ‡ã‚Šæ¨ã¦å»ƒæ­¢ï¼ˆã¾ãŸã¯åˆ¥ãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜ï¼‰
   - ã‚¹ãƒ†ãƒƒãƒ—ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã®ç´ä»˜ã‘

2. on_tool_end()
   - å‡ºåŠ›ã®åˆ‡ã‚Šæ¨ã¦å»ƒæ­¢
   - æˆåŠŸ/å¤±æ•—ãƒ•ãƒ©ã‚°

3. on_tool_error()
   - ã‚¹ã‚¿ãƒƒã‚¯ãƒˆãƒ¬ãƒ¼ã‚¹å®Œå…¨è¨˜éŒ²
```

### Phase 4: ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼é€²æ—ã®è¨˜éŒ²ï¼ˆ4æ—¥ç›®ï¼‰

**ãƒ•ã‚¡ã‚¤ãƒ«**: `src/smartestiroid/workflow.py`

```
å¤‰æ›´ç®‡æ‰€:
1. execute_step()
   - ã‚¹ãƒ†ãƒƒãƒ—é–‹å§‹/çµ‚äº†ãƒ­ã‚°
   - ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå¿œç­”ãƒ­ã‚°

2. plan_step()
   - åˆæœŸãƒ—ãƒ©ãƒ³ç”Ÿæˆãƒ­ã‚°

3. replan_step()
   - ãƒªãƒ—ãƒ©ãƒ³é€²æ—ãƒ­ã‚°
   - ç›®æ¨™é”æˆåˆ¤å®šãƒ­ã‚°
```

### Phase 5: è¨­å®šãƒ»ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã®è¨˜éŒ²ï¼ˆ5æ—¥ç›®ï¼‰

**ãƒ•ã‚¡ã‚¤ãƒ«**: `src/smartestiroid/conftest.py`

```
å¤‰æ›´ç®‡æ‰€:
1. ãƒ†ã‚¹ãƒˆé–‹å§‹/çµ‚äº†
2. ãƒ¢ãƒ‡ãƒ«è¨­å®š
3. Knowhowæƒ…å ±
4. è©•ä¾¡çµæœ
```

### Phase 6: ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ï¼ˆ6æ—¥ç›®ï¼‰

```
1. coloramaä¾å­˜ã®å‰Šé™¤ï¼ˆpyproject.tomlã‹ã‚‰å‰Šé™¤å¯èƒ½ã‹ç¢ºèªï¼‰
2. æœªä½¿ç”¨ã®printæ–‡å‰Šé™¤
3. ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°ï¼ˆAGENTS.mdï¼‰
4. æœ€çµ‚ãƒ†ã‚¹ãƒˆ
```

---

## ğŸ“ ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ

### ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 
```
logs/
â””â”€â”€ TEST_0015_20241204_221930/           # ãƒ†ã‚¹ãƒˆã”ã¨ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
    â”œâ”€â”€ main.jsonl                        # ãƒ¡ã‚¤ãƒ³ãƒ­ã‚°ï¼ˆè»½é‡ãƒ»ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ï¼‰
    â”œâ”€â”€ prompts/                          # LLMãƒ—ãƒ­ãƒ³ãƒ—ãƒˆï¼ˆå¤§ãã„ã®ã§åˆ†é›¢ï¼‰
    â”‚   â”œâ”€â”€ 001_analyze_state.txt
    â”‚   â”œâ”€â”€ 002_build_plan.txt
    â”‚   â””â”€â”€ ...
    â”œâ”€â”€ responses/                        # LLMå¿œç­”ï¼ˆæ§‹é€ åŒ–JSONï¼‰
    â”‚   â”œâ”€â”€ 001_analyze_state.json
    â”‚   â”œâ”€â”€ 002_build_plan.json
    â”‚   â””â”€â”€ ...
    â”œâ”€â”€ locators/                         # ç”»é¢ãƒ­ã‚±ãƒ¼ã‚¿ãƒ¼ï¼ˆXMLã€æ•°åKBã€œæ•°ç™¾KBï¼‰
    â”‚   â”œâ”€â”€ 001.xml
    â”‚   â”œâ”€â”€ 002.xml
    â”‚   â””â”€â”€ ...
    â””â”€â”€ screenshots/                      # ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆï¼ˆJPEGã€æ•°ç™¾KBï¼‰
        â”œâ”€â”€ 001.jpg
        â”œâ”€â”€ 002.jpg
        â””â”€â”€ ...
```

### ãƒ¡ã‚¤ãƒ³ãƒ­ã‚°ï¼ˆmain.jsonlï¼‰ã®è¨­è¨ˆæ–¹é‡

**åŸå‰‡: ãƒ¡ã‚¤ãƒ³ãƒ­ã‚°ã¯è»½é‡ã«ä¿ã¡ã€è©³ç´°ã¯å‚ç…§ãƒ•ã‚¡ã‚¤ãƒ«ã¸**

```json
// âŒ æ‚ªã„ä¾‹: ãƒ­ã‚±ãƒ¼ã‚¿ãƒ¼ã‚’ç›´æ¥åŸ‹ã‚è¾¼ã‚€ï¼ˆãƒ­ã‚°ãŒè‚¥å¤§åŒ–ï¼‰
{"ts":"22:19:31","cat":"LLM","evt":"REQUEST","data":{"locator":"<hierarchy>...</hierarchy>"}}

// âœ… è‰¯ã„ä¾‹: ãƒ•ã‚¡ã‚¤ãƒ«å‚ç…§ã®ã¿è¨˜éŒ²
{"ts":"22:19:31","cat":"LLM","evt":"REQUEST","data":{"locator_file":"locators/001.xml","screenshot_file":"screenshots/001.jpg"}}
```

### ãƒ•ã‚¡ã‚¤ãƒ«å‚ç…§ã®ãƒ«ãƒ¼ãƒ«

| ãƒ‡ãƒ¼ã‚¿ç¨®åˆ¥ | ã‚µã‚¤ã‚ºç›®å®‰ | ä¿å­˜å…ˆ | ãƒ¡ã‚¤ãƒ³ãƒ­ã‚°è¨˜éŒ² |
|-----------|----------|--------|---------------|
| ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ— | æ•°ãƒã‚¤ãƒˆ | main.jsonl | ç›´æ¥ |
| ã‚«ãƒ†ã‚´ãƒª/ã‚¤ãƒ™ãƒ³ãƒˆ | æ•°ãƒã‚¤ãƒˆ | main.jsonl | ç›´æ¥ |
| ãƒ„ãƒ¼ãƒ«å/å¼•æ•° | ã€œ1KB | main.jsonl | ç›´æ¥ |
| ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ | ã€œ1KB | main.jsonl | ç›´æ¥ |
| **LLMãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ** | 5ã€œ50KB | prompts/*.txt | ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ |
| **LLMå¿œç­”** | 1ã€œ10KB | responses/*.json | ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ |
| **ãƒ­ã‚±ãƒ¼ã‚¿ãƒ¼** | 50ã€œ500KB | locators/*.xml | ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ |
| **ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ** | 100ã€œ500KB | screenshots/*.jpg | ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ |

### StructuredLoggerã®ãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜API

```python
class StructuredLogger:
    """æ§‹é€ åŒ–ãƒ­ã‚°å‡ºåŠ›ã‚¯ãƒ©ã‚¹"""
    
    _log_dir: Optional[Path] = None
    _file_counter: int = 0
    
    @classmethod
    def init(cls, test_id: str, output_dir: Path = Path("logs")):
        """ãƒ†ã‚¹ãƒˆç”¨ãƒ­ã‚°ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’åˆæœŸåŒ–"""
        timestamp = datetime.now().strftime("%Y%m%d_%H%M%S")
        cls._log_dir = output_dir / f"{test_id}_{timestamp}"
        cls._log_dir.mkdir(parents=True, exist_ok=True)
        
        # ã‚µãƒ–ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä½œæˆ
        (cls._log_dir / "prompts").mkdir()
        (cls._log_dir / "responses").mkdir()
        (cls._log_dir / "locators").mkdir()
        (cls._log_dir / "screenshots").mkdir()
        
        cls._main_log = open(cls._log_dir / "main.jsonl", "w", encoding="utf-8")
        cls._file_counter = 0
    
    @classmethod
    def save_locator(cls, xml_content: str) -> str:
        """ãƒ­ã‚±ãƒ¼ã‚¿ãƒ¼ã‚’åˆ¥ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¿å­˜ã—ã€ç›¸å¯¾ãƒ‘ã‚¹ã‚’è¿”ã™"""
        cls._file_counter += 1
        filename = f"locators/{cls._file_counter:03d}.xml"
        filepath = cls._log_dir / filename
        filepath.write_text(xml_content, encoding="utf-8")
        return filename
    
    @classmethod
    def save_screenshot(cls, image_data: bytes) -> str:
        """ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã‚’åˆ¥ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¿å­˜ã—ã€ç›¸å¯¾ãƒ‘ã‚¹ã‚’è¿”ã™"""
        cls._file_counter += 1
        filename = f"screenshots/{cls._file_counter:03d}.jpg"
        filepath = cls._log_dir / filename
        filepath.write_bytes(image_data)
        return filename
    
    @classmethod
    def save_prompt(cls, prompt: str, stage: str) -> str:
        """LLMãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’åˆ¥ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¿å­˜ã—ã€ç›¸å¯¾ãƒ‘ã‚¹ã‚’è¿”ã™"""
        cls._file_counter += 1
        filename = f"prompts/{cls._file_counter:03d}_{stage}.txt"
        filepath = cls._log_dir / filename
        filepath.write_text(prompt, encoding="utf-8")
        return filename
    
    @classmethod
    def save_response(cls, response: dict, stage: str) -> str:
        """LLMå¿œç­”ã‚’åˆ¥ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¿å­˜ã—ã€ç›¸å¯¾ãƒ‘ã‚¹ã‚’è¿”ã™"""
        cls._file_counter += 1
        filename = f"responses/{cls._file_counter:03d}_{stage}.json"
        filepath = cls._log_dir / filename
        filepath.write_text(json.dumps(response, ensure_ascii=False, indent=2), encoding="utf-8")
        return filename
    
    @classmethod
    def log(cls, category: str, event: str, data: dict = None, message: str = None, level: str = "INFO"):
        """ãƒ¡ã‚¤ãƒ³ãƒ­ã‚°ã«è¨˜éŒ²ï¼ˆdataã«ã¯ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹å‚ç…§ã‚’å«ã‚ã‚‹ï¼‰"""
        # ... æ—¢å­˜ã®å®Ÿè£… ...
```

### ä½¿ç”¨ä¾‹

```python
# multi_stage_replanner.py ã§ã®ä½¿ç”¨ä¾‹
from smartestiroid.utils.structured_logger import StructuredLogger as SLog

async def analyze_state(self, locator: str, image_data: bytes, ...):
    # å¤§ããªãƒ‡ãƒ¼ã‚¿ã¯åˆ¥ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¿å­˜
    locator_file = SLog.save_locator(locator)
    screenshot_file = SLog.save_screenshot(image_data)
    prompt_file = SLog.save_prompt(system_prompt + user_prompt, "analyze_state")
    
    # ãƒ¡ã‚¤ãƒ³ãƒ­ã‚°ã«ã¯å‚ç…§ãƒ‘ã‚¹ã®ã¿è¨˜éŒ²
    SLog.log(
        category="LLM",
        event="REQUEST",
        data={
            "stage": "analyze_state",
            "model": self.model_name,
            "locator_file": locator_file,
            "screenshot_file": screenshot_file,
            "prompt_file": prompt_file
        },
        message="ç”»é¢åˆ†æé–‹å§‹"
    )
    
    # LLMå‘¼ã³å‡ºã—
    response = await self.llm.ainvoke(...)
    
    # å¿œç­”ã‚‚åˆ¥ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¿å­˜
    response_file = SLog.save_response(response.dict(), "analyze_state")
    
    SLog.log(
        category="LLM",
        event="RESPONSE",
        data={
            "stage": "analyze_state",
            "duration_ms": elapsed_ms,
            "response_file": response_file
        },
        message=f"ç”»é¢åˆ†æå®Œäº†: {response.current_screen_type}"
    )
```

### LLMè§£ææ™‚ã®èª­ã¿è¾¼ã¿

```python
# ãƒ­ã‚°è§£æã‚¹ã‚¯ãƒªãƒ—ãƒˆä¾‹
import json
from pathlib import Path

def load_full_context(log_dir: Path, log_entry: dict) -> dict:
    """ãƒ¡ã‚¤ãƒ³ãƒ­ã‚°ã‚¨ãƒ³ãƒˆãƒªã‹ã‚‰å®Œå…¨ãªã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’èª­ã¿è¾¼ã‚€"""
    data = log_entry.get("data", {})
    
    # ãƒ•ã‚¡ã‚¤ãƒ«å‚ç…§ãŒã‚ã‚Œã°èª­ã¿è¾¼ã‚€
    if "locator_file" in data:
        data["locator"] = (log_dir / data["locator_file"]).read_text()
    if "prompt_file" in data:
        data["prompt"] = (log_dir / data["prompt_file"]).read_text()
    if "response_file" in data:
        data["response"] = json.loads((log_dir / data["response_file"]).read_text())
    
    return data
```

---

## ğŸ“Š æœŸå¾…ã•ã‚Œã‚‹åŠ¹æœ

### 1. LLMè§£æã®ç²¾åº¦å‘ä¸Š
- JSONå½¢å¼ã®æ§‹é€ åŒ–ãƒ­ã‚°ã«ã‚ˆã‚Šã€LLMãŒæ­£ç¢ºã«çŠ¶æ…‹ã‚’æŠŠæ¡
- ã‚«ãƒ†ã‚´ãƒªãƒ»ã‚¤ãƒ™ãƒ³ãƒˆã®æ¨™æº–åŒ–ã§ã€ãƒ‘ã‚¿ãƒ¼ãƒ³èªè­˜ãŒå®¹æ˜“ã«

### 2. ãƒ‡ãƒãƒƒã‚°åŠ¹ç‡ã®å‘ä¸Š
- å•é¡Œç®‡æ‰€ã®ç‰¹å®šãŒå®¹æ˜“ï¼ˆã‚«ãƒ†ã‚´ãƒªã§ãƒ•ã‚£ãƒ«ã‚¿å¯èƒ½ï¼‰
- æ™‚ç³»åˆ—ã§ã®è¿½è·¡ãŒã—ã‚„ã™ã„

### 3. ãƒ­ã‚°è§£æãƒ„ãƒ¼ãƒ«ã¨ã®çµ±åˆ
- JSONå½¢å¼ã§ãƒ­ã‚°åˆ†æãƒ„ãƒ¼ãƒ«ã«å–ã‚Šè¾¼ã¿å¯èƒ½
- ã‚°ãƒ©ãƒ•åŒ–ãƒ»å¯è¦–åŒ–ãŒå®¹æ˜“

### 4. äººé–“ã®å¯èª­æ€§ç¶­æŒ
- ã‚¢ã‚¤ã‚³ãƒ³ä»˜ãã‚µãƒãƒªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã§ç›´æ„Ÿçš„ã«çŠ¶æ³æŠŠæ¡
- æ§‹é€ åŒ–ã•ã‚ŒãŸAllureãƒ¬ãƒãƒ¼ãƒˆã§è©³ç´°ç¢ºèª

---

## ğŸ“ é–¢é€£ãƒ•ã‚¡ã‚¤ãƒ«

| ãƒ•ã‚¡ã‚¤ãƒ« | printç®‡æ‰€ | å„ªå…ˆåº¦ |
|---------|----------|--------|
| `conftest.py` | 50ç®‡æ‰€ | ä½ |
| `workflow.py` | 25ç®‡æ‰€ | é«˜ |
| `agents/simple_planner.py` | 25ç®‡æ‰€ | ä¸­ |
| `agents/multi_stage_replanner.py` | 12ç®‡æ‰€ | é«˜ |
| `appium_tools/device_info.py` | 1ç®‡æ‰€ | ä½ |
| `appium_tools/token_counter.py` | 1ç®‡æ‰€ | ä½ |

---

## âš ï¸ ç§»è¡Œæ™‚ã®æ³¨æ„äº‹é …

### 1. å¾Œæ–¹äº’æ›æ€§

```python
# æ—¢å­˜ã®Allureãƒ¬ãƒãƒ¼ãƒˆã¨ã®çµ±åˆã‚’ç¶­æŒ
# Allureã¸ã®å‡ºåŠ›ã¯å¼•ãç¶šãè¡Œã„ã€JSONãƒ­ã‚°ã¨ä¸¦è¡Œé‹ç”¨
allure.attach(...)  # æ—¢å­˜ã®ã¾ã¾ç¶­æŒ
SLog.log(...)       # æ–°è¦è¿½åŠ 
```

### 2. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è€ƒæ…®

```python
# ãƒ•ã‚¡ã‚¤ãƒ«I/Oã®é »åº¦ã‚’æŠ‘ãˆã‚‹
# - ãƒãƒƒãƒ•ã‚¡ãƒªãƒ³ã‚°: flush()ã¯é‡è¦ãªã‚¤ãƒ™ãƒ³ãƒˆæ™‚ã®ã¿
# - éåŒæœŸæ›¸ãè¾¼ã¿: å°†æ¥çš„ã«ã¯asyncioå¯¾å¿œã‚‚æ¤œè¨

class StructuredLogger:
    _buffer: list = []
    _buffer_size: int = 10  # 10ä»¶ã”ã¨ã«flush
    
    @classmethod
    def log(cls, ...):
        cls._buffer.append(log_entry)
        if len(cls._buffer) >= cls._buffer_size or level in ("ERROR", "WARN"):
            cls._flush()
```

### 3. ãƒ­ã‚°ãƒ¬ãƒ™ãƒ«ã«ã‚ˆã‚‹ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°

```python
# ç’°å¢ƒå¤‰æ•°ã§ãƒ­ã‚°ãƒ¬ãƒ™ãƒ«ã‚’åˆ¶å¾¡
# SMARTESTIROID_LOG_LEVEL=DEBUG â†’ å…¨ãƒ­ã‚°å‡ºåŠ›
# SMARTESTIROID_LOG_LEVEL=INFO â†’ DEBUGä»¥å¤–
# SMARTESTIROID_LOG_LEVEL=WARN â†’ WARN, ERROR ã®ã¿

import os
LOG_LEVEL = os.environ.get("SMARTESTIROID_LOG_LEVEL", "INFO")
```

### 4. æ—¢å­˜ã‚³ãƒ¼ãƒ‰ã¸ã®å½±éŸ¿æœ€å°åŒ–

```python
# æ®µéšçš„ç§»è¡Œ: æ–°æ—§ä¸¡æ–¹ã‚’å‡ºåŠ›
def legacy_print_with_new_log(message: str, category: str, event: str, data: dict):
    """ç§»è¡ŒæœŸé–“ä¸­ã®äº’æ›é–¢æ•°"""
    # æ—§: æ—¢å­˜ã®printå‡ºåŠ›ï¼ˆå¾ã€…ã«å‰Šé™¤ï¼‰
    print(message)
    # æ–°: æ§‹é€ åŒ–ãƒ­ã‚°å‡ºåŠ›
    SLog.log(category, event, data, message)
```

---

## ğŸ§ª ãƒ†ã‚¹ãƒˆè¨ˆç”»

### 1. å˜ä½“ãƒ†ã‚¹ãƒˆï¼ˆstructured_logger.pyï¼‰

```python
# tests/test_structured_logger.py

def test_log_creates_jsonl_file():
    """JSONLãƒ•ã‚¡ã‚¤ãƒ«ãŒæ­£ã—ãä½œæˆã•ã‚Œã‚‹ã“ã¨"""
    
def test_log_entry_format():
    """ãƒ­ã‚°ã‚¨ãƒ³ãƒˆãƒªãŒæ­£ã—ã„ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã§ã‚ã‚‹ã“ã¨"""
    
def test_save_locator_creates_file():
    """ãƒ­ã‚±ãƒ¼ã‚¿ãƒ¼ãŒåˆ¥ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¿å­˜ã•ã‚Œã‚‹ã“ã¨"""
    
def test_save_screenshot_creates_file():
    """ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆãŒåˆ¥ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¿å­˜ã•ã‚Œã‚‹ã“ã¨"""
    
def test_file_reference_in_log():
    """ãƒ¡ã‚¤ãƒ³ãƒ­ã‚°ã«ãƒ•ã‚¡ã‚¤ãƒ«å‚ç…§ãƒ‘ã‚¹ãŒè¨˜éŒ²ã•ã‚Œã‚‹ã“ã¨"""
    
def test_console_output_has_icon():
    """ã‚³ãƒ³ã‚½ãƒ¼ãƒ«å‡ºåŠ›ã«ã‚¢ã‚¤ã‚³ãƒ³ãŒä»˜ãã“ã¨"""
    
def test_log_level_filtering():
    """ãƒ­ã‚°ãƒ¬ãƒ™ãƒ«ã«ã‚ˆã‚‹ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ãŒå‹•ä½œã™ã‚‹ã“ã¨"""
```

### 2. çµ±åˆãƒ†ã‚¹ãƒˆ

```bash
# å®Ÿéš›ã®ãƒ†ã‚¹ãƒˆå®Ÿè¡Œã§ãƒ­ã‚°ã‚’ç¢ºèª
uv run pytest src/smartestiroid/test_android_app.py -k "TEST_0001" -v

# ç”Ÿæˆã•ã‚ŒãŸãƒ­ã‚°ã‚’æ¤œè¨¼
ls -la logs/TEST_0001_*/
cat logs/TEST_0001_*/main.jsonl | head -20
```

### 3. ãƒ­ã‚°è§£æãƒ†ã‚¹ãƒˆ

```python
# ãƒ­ã‚°ã‹ã‚‰TEST_0015ã®ã‚¿ãƒ–ã‚¹ã‚­ãƒƒãƒ—å•é¡Œã‚’æ¤œå‡ºã§ãã‚‹ã‹ç¢ºèª
def test_can_detect_tab_skip_from_log():
    """ãƒ­ã‚°ã‹ã‚‰ã‚¹ã‚­ãƒƒãƒ—å•é¡Œã‚’æ¤œå‡ºã§ãã‚‹ã“ã¨"""
    log_dir = Path("logs/TEST_0015_...")
    main_log = log_dir / "main.jsonl"
    
    # SKIPã‚¤ãƒ™ãƒ³ãƒˆã‚’æ¤œç´¢
    skip_events = [
        json.loads(line) for line in main_log.read_text().splitlines()
        if '"evt":"SKIP"' in line
    ]
    
    assert len(skip_events) > 0, "ã‚¹ã‚­ãƒƒãƒ—ã‚¤ãƒ™ãƒ³ãƒˆãŒè¨˜éŒ²ã•ã‚Œã¦ã„ãªã„"
```

---

## ğŸ“Š æˆåŠŸåŸºæº–

### å¿…é ˆè¦ä»¶
- [ ] ã™ã¹ã¦ã®LLMå‘¼ã³å‡ºã—ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ/å¿œç­”ãŒãƒ•ã‚¡ã‚¤ãƒ«ã«ä¿å­˜ã•ã‚Œã‚‹
- [ ] ã™ã¹ã¦ã®ãƒ„ãƒ¼ãƒ«å‘¼ã³å‡ºã—ã®å…¥å‡ºåŠ›ãŒå®Œå…¨ã«è¨˜éŒ²ã•ã‚Œã‚‹
- [ ] ãƒ†ã‚¹ãƒˆã”ã¨ã«ç‹¬ç«‹ã—ãŸãƒ­ã‚°ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒä½œæˆã•ã‚Œã‚‹
- [ ] ã‚³ãƒ³ã‚½ãƒ¼ãƒ«å‡ºåŠ›ãŒäººé–“ã«èª­ã¿ã‚„ã™ã„ï¼ˆã‚¢ã‚¤ã‚³ãƒ³ä»˜ãï¼‰
- [ ] JSONãƒ­ã‚°ãŒLLMã§è§£æå¯èƒ½ï¼ˆæ§‹é€ åŒ–ã•ã‚Œã¦ã„ã‚‹ï¼‰

### æ¨å¥¨è¦ä»¶
- [ ] ãƒ­ã‚°ã‚µã‚¤ã‚ºãŒé©åˆ‡ï¼ˆãƒ¡ã‚¤ãƒ³ãƒ­ã‚° < 1MB/ãƒ†ã‚¹ãƒˆï¼‰
- [ ] coloramaä¾å­˜ãŒå‰Šé™¤ã•ã‚Œã¦ã„ã‚‹
- [ ] æ—¢å­˜ã®Allureãƒ¬ãƒãƒ¼ãƒˆãŒå¼•ãç¶šãå‹•ä½œã™ã‚‹
- [ ] TEST_0015ã®ã‚¿ãƒ–ã‚¹ã‚­ãƒƒãƒ—å•é¡ŒãŒãƒ­ã‚°ã‹ã‚‰æ¤œå‡ºå¯èƒ½

---

## ğŸ”„ ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯è¨ˆç”»

å•é¡Œç™ºç”Ÿæ™‚ã®ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯æ‰‹é †ï¼š

```bash
# 1. structured_logger.pyã‚’å‰Šé™¤
rm src/smartestiroid/utils/structured_logger.py

# 2. å¤‰æ›´ã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’revert
git checkout src/smartestiroid/workflow.py
git checkout src/smartestiroid/agents/multi_stage_replanner.py
git checkout src/smartestiroid/agents/simple_planner.py
git checkout src/smartestiroid/conftest.py

# 3. å‹•ä½œç¢ºèª
uv run pytest src/smartestiroid/test_android_app.py -k "TEST_0001" -v
```

---

## âœ… å®Ÿæ–½TODOï¼ˆãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆï¼‰

> **æ¨å¥¨å®Ÿæ–½é †åº**: Phase 1 â†’ Phase 2 â†’ Phase 3 â†’ Phase 4 â†’ Phase 5 â†’ Phase 6

### Phase 1: StructuredLogger åŸºç›¤å®Ÿè£… ğŸ—ï¸

- [ ] **1.1** `src/smartestiroid/utils/structured_logger.py` ã‚’ä½œæˆ
  - [ ] StructuredLogger ã‚¯ãƒ©ã‚¹ã®éª¨çµ„ã¿
  - [ ] `init(test_id, output_dir)` ãƒ¡ã‚½ãƒƒãƒ‰
  - [ ] `close()` ãƒ¡ã‚½ãƒƒãƒ‰  
  - [ ] `log(category, event, data, message, level)` ãƒ¡ã‚½ãƒƒãƒ‰
  - [ ] JSONLãƒ•ã‚¡ã‚¤ãƒ«ã¸ã®å‡ºåŠ›
  - [ ] ã‚³ãƒ³ã‚½ãƒ¼ãƒ«å‡ºåŠ›ï¼ˆã‚¢ã‚¤ã‚³ãƒ³ä»˜ãï¼‰
- [ ] **1.2** LogCategory å®šæ•°ã‚¯ãƒ©ã‚¹ã‚’å®šç¾©
- [ ] **1.3** LogEvent å®šæ•°ã‚¯ãƒ©ã‚¹ã‚’å®šç¾©
- [ ] **1.4** `tests/test_structured_logger.py` ã‚’ä½œæˆ
  - [ ] `test_log_creates_jsonl_file`
  - [ ] `test_log_entry_format`
  - [ ] `test_console_output_has_icon`
- [ ] **1.5** ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ: `uv run pytest tests/test_structured_logger.py -v`

### Phase 2: conftest.py ç§»è¡Œ ğŸ”§

- [ ] **2.1** StructuredLogger ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆè¿½åŠ 
- [ ] **2.2** `pytest_collection_finish` ã§ãƒ­ã‚¬ãƒ¼åˆæœŸåŒ–
- [ ] **2.3** ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—/è¨­å®šç³»print â†’ SLog.log ç§»è¡Œï¼ˆç´„15ç®‡æ‰€ï¼‰
  - [ ] ä½¿ç”¨ãƒ¢ãƒ‡ãƒ«æƒ…å ±
  - [ ] knowhowæƒ…å ±
  - [ ] capabilitiesæƒ…å ±
- [ ] **2.4** ãƒˆãƒ¼ã‚¯ãƒ³ä½¿ç”¨é‡print â†’ SLog.log ç§»è¡Œï¼ˆç´„8ç®‡æ‰€ï¼‰
- [ ] **2.5** ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†print â†’ SLog.log ç§»è¡Œï¼ˆç´„5ç®‡æ‰€ï¼‰
- [ ] **2.6** âš ï¸ **GUIé€šçŸ¥ç”¨print `[PROGRESS]` ã¯å¤‰æ›´ã—ãªã„**
- [ ] **2.7** ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ: `uv run pytest src/smartestiroid/test_android_app.py -k "TEST_0001"`

### Phase 3: workflow.py ç§»è¡Œ ğŸ”§

- [ ] **3.1** StructuredLogger ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆè¿½åŠ 
- [ ] **3.2** ã‚¹ãƒ†ãƒƒãƒ—å®Ÿè¡Œprint â†’ SLog.log ç§»è¡Œï¼ˆç´„15ç®‡æ‰€ï¼‰
  - [ ] STEP.START
  - [ ] STEP.COMPLETE
  - [ ] STEP.FAIL
- [ ] **3.3** ãƒªãƒ—ãƒ©ãƒ³é€²æ—print â†’ SLog.log ç§»è¡Œï¼ˆç´„12ç®‡æ‰€ï¼‰
  - [ ] REPLAN.START
  - [ ] REPLAN.COMPLETE
- [ ] **3.4** æ¤œè¨¼LLMprint â†’ SLog.log ç§»è¡Œï¼ˆç´„10ç®‡æ‰€ï¼‰
  - [ ] LLM.VERIFY_REQUEST
  - [ ] LLM.VERIFY_RESPONSE
- [ ] **3.5** ç›®æ¨™é€²æ—print â†’ SLog.log ç§»è¡Œï¼ˆç´„10ç®‡æ‰€ï¼‰
  - [ ] OBJECTIVE.ACHIEVED
  - [ ] OBJECTIVE.NOT_ACHIEVED
- [ ] **3.6** âš ï¸ **GUIé€šçŸ¥ç”¨print `[REPLAN_PROGRESS]` ã¯å¤‰æ›´ã—ãªã„**
- [ ] **3.7** ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ

### Phase 4: multi_stage_replanner.py ç§»è¡Œ ğŸ”§

- [ ] **4.1** StructuredLogger ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆè¿½åŠ 
- [ ] **4.2** analyze_state print â†’ SLog.log ç§»è¡Œï¼ˆç´„15ç®‡æ‰€ï¼‰
  - [ ] ANALYZE.START
  - [ ] ANALYZE.COMPLETE
  - [ ] StateAnalysiså…¨9ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’dataã«å«ã‚ã‚‹
- [ ] **4.3** decide_action print â†’ SLog.log ç§»è¡Œï¼ˆç´„10ç®‡æ‰€ï¼‰
  - [ ] DECIDE.START
  - [ ] DECIDE.COMPLETE
- [ ] **4.4** build_plan print â†’ SLog.log ç§»è¡Œï¼ˆç´„10ç®‡æ‰€ï¼‰
  - [ ] PLAN.START
  - [ ] PLAN.COMPLETE
- [ ] **4.5** build_response print â†’ SLog.log ç§»è¡Œï¼ˆç´„10ç®‡æ‰€ï¼‰
- [ ] **4.6** ç”»é¢ä¸æ•´åˆæ¤œå‡ºprint â†’ SLog.log ç§»è¡Œ
  - [ ] SCREEN.INCONSISTENCY_DETECTED
  - [ ] SCREEN.INCONSISTENCY_RESOLVED
  - [ ] SCREEN.INCONSISTENCY_PERSISTENT
- [ ] **4.7** ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ

### Phase 5: simple_planner.py ç§»è¡Œ ğŸ”§

- [ ] **5.1** StructuredLogger ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆè¿½åŠ 
- [ ] **5.2** ç”»é¢åˆ†æprint â†’ SLog.log ç§»è¡Œï¼ˆç´„10ç®‡æ‰€ï¼‰
- [ ] **5.3** ãƒ—ãƒ©ãƒ³ç”Ÿæˆprint â†’ SLog.log ç§»è¡Œï¼ˆç´„12ç®‡æ‰€ï¼‰
- [ ] **5.4** ç›®æ¨™è©•ä¾¡print â†’ SLog.log ç§»è¡Œï¼ˆç´„10ç®‡æ‰€ï¼‰
- [ ] **5.5** ç”»é¢ä¸æ•´åˆãƒªãƒˆãƒ©ã‚¤print â†’ SLog.log ç§»è¡Œï¼ˆç´„8ç®‡æ‰€ï¼‰
- [ ] **5.6** ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ

### Phase 6: ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ— ğŸ§¹

- [ ] **6.1** coloramaä¾å­˜ã®å‰Šé™¤
  - [ ] `from colorama import Fore, Style` ã‚’å‰Šé™¤
  - [ ] `Fore.CYAN`, `Fore.GREEN` ç­‰ã®å‚ç…§ã‚’å‰Šé™¤
- [ ] **6.2** pyproject.tomlã‹ã‚‰coloramaä¾å­˜ã‚’å‰Šé™¤ï¼ˆä½¿ç”¨ç®‡æ‰€ãŒãªããªã£ãŸå ´åˆï¼‰
- [ ] **6.3** å…¨ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ: `uv run pytest tests/ -v`
- [ ] **6.4** å®Ÿæ©Ÿãƒ†ã‚¹ãƒˆ: `uv run pytest src/smartestiroid/test_android_app.py -k "TEST_0001"`
- [ ] **6.5** ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«å‡ºåŠ›ç¢ºèª
  - [ ] JSONLãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆãŒæ­£ã—ã„
  - [ ] LLMå…¥å‡ºåŠ›ãŒå®Œå…¨ã«è¨˜éŒ²ã•ã‚Œã¦ã„ã‚‹
  - [ ] ãƒ„ãƒ¼ãƒ«å…¥å‡ºåŠ›ãŒå®Œå…¨ã«è¨˜éŒ²ã•ã‚Œã¦ã„ã‚‹
- [ ] **6.6** TEST_0023ã§ç”»é¢ä¸æ•´åˆãƒ­ã‚°ã‚’ç¢ºèª
- [ ] **6.7** ä¸è¦ãªprintæ–‡ã®æœ€çµ‚å‰Šé™¤

---

## ğŸ“Š é€²æ—ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°

| Phase | ã‚¿ã‚¹ã‚¯æ•° | å®Œäº† | ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ |
|-------|---------|------|-----------|
| Phase 1 | 5 | 0 | â¬œ æœªç€æ‰‹ |
| Phase 2 | 7 | 0 | â¬œ æœªç€æ‰‹ |
| Phase 3 | 7 | 0 | â¬œ æœªç€æ‰‹ |
| Phase 4 | 7 | 0 | â¬œ æœªç€æ‰‹ |
| Phase 5 | 6 | 0 | â¬œ æœªç€æ‰‹ |
| Phase 6 | 7 | 0 | â¬œ æœªç€æ‰‹ |
| **åˆè¨ˆ** | **39** | **0** | â¬œ **0%** |

